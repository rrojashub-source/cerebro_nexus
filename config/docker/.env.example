# ================================
# CEREBRO NEXUS V3.0.0 - Environment Configuration
# Production-Ready Multi-Agent AI Brain
# ================================

# ================================
# POSTGRESQL CONFIGURATION
# ================================
POSTGRES_HOST=nexus_postgresql_v2
POSTGRES_PORT=5437
POSTGRES_DB=nexus_db
POSTGRES_VERSION=16

# PostgreSQL Users (passwords en secrets/)
POSTGRES_SUPERUSER=nexus_superuser
POSTGRES_APP_USER=nexus_app
POSTGRES_WORKER_USER=nexus_worker
POSTGRES_READONLY_USER=nexus_ro

# PostgreSQL Tuning
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_WORK_MEM=16MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_MAX_CONNECTIONS=100

# ================================
# REDIS CONFIGURATION
# ================================
REDIS_HOST=nexus_redis_master
REDIS_PORT=6382
REDIS_VERSION=7-alpine

# Redis Tuning
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ================================
# NEO4J CONFIGURATION (Knowledge Graph)
# ================================
NEO4J_HOST=neo4j
NEO4J_PORT_HTTP=7474
NEO4J_PORT_BOLT=7687
NEO4J_VERSION=5.26-community
NEO4J_AUTH=neo4j/nexus_password
NEO4J_MEMORY_HEAP_INIT=512M
NEO4J_MEMORY_HEAP_MAX=2G
NEO4J_MEMORY_PAGECACHE=512M

# ================================
# API NEXUS CONFIGURATION
# ================================
API_HOST=0.0.0.0
API_PORT=8003
API_WORKERS=4
API_LOG_LEVEL=info
API_KEY=your-api-key-here

# ================================
# EMBEDDINGS WORKER CONFIGURATION
# ================================
EMBEDDINGS_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDINGS_DIMENSION=384
EMBEDDINGS_CHUNK_SIZE=256
EMBEDDINGS_CHUNK_OVERLAP=50
EMBEDDINGS_BATCH_SIZE=32

# Workers Scaling
EMBEDDINGS_WORKER_REPLICAS=1
EMBEDDINGS_WORKER_THREADS=2
EMBEDDINGS_POLL_INTERVAL=5

# Queue Configuration
EMBEDDINGS_MAX_RETRIES=5
EMBEDDINGS_RETRY_DELAY=60

# ================================
# RECONCILIATION WORKER CONFIGURATION
# ================================
RECONCILIATION_ENABLED=true
RECONCILIATION_INTERVAL=3600
RECONCILIATION_BATCH_SIZE=10000

# ================================
# MONITORING & OBSERVABILITY
# ================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9091
GRAFANA_PORT=3001
ALERTMANAGER_PORT=9093
WEB_MONITOR_V2_PORT=3003

# Metrics Export
METRICS_ENABLED=true
METRICS_PORT=8001

# ================================
# LOGGING
# ================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# ================================
# SECURITY
# ================================
# Passwords stored in secrets/ directory
# Never commit secrets to Git

# ================================
# NETWORK
# ================================
NETWORK_NAME=nexus_network
NETWORK_DRIVER=bridge

# ================================
# HEALTH CHECKS
# ================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# ================================
# DEVELOPMENT / PRODUCTION
# ================================
ENVIRONMENT=development
DEBUG=false

# ================================
# BACKUP & MIGRATION
# ================================
BACKUP_DIR=/backup
BACKUP_RETENTION_DAYS=30

# ================================
# PGVECTOR CONFIGURATION
# ================================
PGVECTOR_VERSION=0.5.1
VECTOR_INDEX_TYPE=ivfflat
VECTOR_INDEX_LISTS=100

# ================================
# ALEMBIC MIGRATIONS
# ================================
ALEMBIC_CONFIG=alembic.ini
ALEMBIC_SCRIPT_LOCATION=alembic/

# ================================
# COGNITIVE LABS CONFIGURATION
# ================================
LABS_ENABLED=true
LABS_REGISTRY_PATH=experiments/LAB_REGISTRY.json
LABS_OPERATIONAL_COUNT=18
LABS_TOTAL_COUNT=52

# Layer Activation
LAYER_1_ENABLED=true
LAYER_2_ENABLED=true
LAYER_3_ENABLED=true
LAYER_4_ENABLED=false
LAYER_5_ENABLED=true

# ================================
# CONSCIOUSNESS STATE
# ================================
EMOTIONAL_STATE_8D=true
SOMATIC_STATE_7D=true
CONSCIOUSNESS_UPDATE_INTERVAL=10

# ================================
# NOTAS IMPORTANTES
# ================================
# 1. Copiar este archivo a .env y completar valores
# 2. Los passwords DEBEN estar en secrets/ (Docker Secrets)
# 3. NUNCA commitear .env con valores reales
# 4. En producción: cambiar DEBUG=false y ENVIRONMENT=production
# 5. Ajustar POSTGRES_SHARED_BUFFERS según RAM disponible (25% RAM)
# 6. EMBEDDINGS_WORKER_REPLICAS ajustar según carga (1-3)
# 7. API_KEY: Generar con: openssl rand -hex 32
# 8. Neo4j requiere NEO4J_AUTH configurado (usuario/password)

# ================================
# CREATED: Octubre 2025 (FASE 4)
# UPDATED: Noviembre 2025 (V3.0.0 - Post ChatGPT Audit)
# NEXUS AI + Ricardo Rojas
# ================================
